<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°æµ·å¤©çš„åå®«</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #4facfe 0%, #667eea 50%, #764ba2 100%);
            font-family: 'Ma Shan Zheng', cursive;
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            padding: 20px 0;
            z-index: 2;
        }

        .title {
            font-size: 4.5rem;
            color: white;
            text-shadow: 3px 3px 15px rgba(0, 0, 0, 0.5), 0 0 30px rgba(255, 255, 255, 0.3);
            letter-spacing: 0.15em;
            animation: fadeIn 2s ease-in-out;
        }

        .main-container {
            display: flex;
            flex: 1;
            position: relative;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 220px;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(15px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 25px;
            gap: 25px;
            z-index: 1;
        }

        .nav-button {
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.25);
            color: white;
            padding: 20px 25px;
            border-radius: 12px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-family: 'Ma Shan Zheng', cursive;
            position: relative;
            overflow: hidden;
            text-decoration: none;
            display: block;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }

        .nav-button:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            text-decoration: none;
        }

        .nav-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .nav-button:active {
            transform: translateX(5px) scale(0.95);
        }

        .forum-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            width: 100%;
            max-width: 1200px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .forum-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }

        .forum-title {
            color: white;
            font-size: 2.5rem;
            font-weight: bold;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
        }

        .forum-controls {
            display: flex;
            gap: 15px;
        }

        .control-button {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 1.1rem;
            text-decoration: none;
            display: inline-block;
        }

        .control-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            text-decoration: none;
            color: white;
        }

        .post-item {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .post-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .post-title {
            color: white;
            font-size: 1.5rem;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .post-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .post-author {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .post-stats {
            display: flex;
            gap: 15px;
        }

        .post-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .tag {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 0.8rem;
        }

        .footer-text {
            position: fixed;
            bottom: 20px;
            right: 20px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            font-family: 'Ma Shan Zheng', cursive;
            z-index: 10;
            line-height: 1.4;
            white-space: nowrap;
            text-align: right;
        }

        .content {
            margin-left: 220px;
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 40px 20px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 180px;
                padding: 20px;
                gap: 20px;
            }

            .content {
                margin-left: 180px;
            }

            .title {
                font-size: 3rem;
            }

            .nav-button {
                font-size: 1.3rem;
                padding: 18px 20px;
            }
        }

        @media (max-width: 480px) {
            .sidebar {
                width: 140px;
                padding: 15px;
                gap: 15px;
            }

            .content {
                margin-left: 140px;
            }

            .title {
                font-size: 2.2rem;
            }

            .nav-button {
                font-size: 1.1rem;
                padding: 15px 12px;
            }

            .footer-text {
                font-size: 0.75rem;
                bottom: 15px;
                right: 15px;
                max-width: 150px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1 class="title">æ–°æµ·å¤©çš„åå®«</h1>
    </div>

    <div class="main-container">
        <div class="sidebar">
            <a href="#" class="nav-button">æ¸¸æˆ</a>
            <a href="note.html" class="nav-button">è½»å°è¯´</a>
            <a href="#" class="nav-button">æ¼«ç”»</a>
            <a href="#" class="nav-button">åŠ¨ç”»</a>
        </div>

        <div class="content">
            <div class="forum-container">
                <div class="forum-header">
                    <h2 class="forum-title">ä¸»é¡µè®ºå›</h2>
                    <div class="forum-controls">
                        <a href="#" class="control-button" id="new-post-btn">å‘æ–°å¸–</a>
                        <a href="#" class="control-button" id="view-all-btn">æŸ¥çœ‹æ‰€æœ‰å¸–å­</a>
                        <a href="#" class="control-button" id="hot-btn">çƒ­é—¨</a>
                        <a href="#" class="control-button" id="latest-btn">æœ€æ–°</a>
                    </div>
                </div>

            <div id="posts-list" style="display: none;">
                <!-- å¸–å­å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>

            <div id="loading-message" style="text-align: center; color: white; padding: 40px;">
                <p>æ­£åœ¨åŠ è½½è®ºå›å¸–å­...</p>
            </div>
        </div>
        </div>
    </div>

    <div class="footer-text">
        æ­¦æ±‰çººç»‡å¤§å­¦æŸå°ä¼—å®è—åŒå¥½ä¼šå”¯ä¸€æŒ‡å®šç½‘ç«™
    </div>

    <script>
        // GitHub APIé…ç½®
        const GITHUB_OWNER = 'Aliceykr';
        const GITHUB_REPO = 'Web';
        const ISSUES_LABEL = 'è®ºå›'; // ç”¨äºæ ‡è¯†è®ºå›å¸–å­çš„æ ‡ç­¾
        let currentSort = 'updated'; // é»˜è®¤æŒ‰æ—¶é—´æ’åº

        // DOMå…ƒç´ 
        const forumContainer = document.querySelector('.forum-container');
        const postsList = document.getElementById('posts-list');
        const loadingMessage = document.getElementById('loading-message');

        // åŠ è½½æœ¬åœ°è®ºå›å¸–å­
        function loadLocalPosts() {
            // éšè—åŠ è½½æ¶ˆæ¯ï¼Œæ˜¾ç¤ºå¸–å­åˆ—è¡¨
            if (loadingMessage) loadingMessage.style.display = 'none';
            if (postsList) postsList.style.display = 'block';

            // ä»localStorageè·å–å¸–å­
            const posts = JSON.parse(localStorage.getItem('forumPosts') || '[]');

            // æ ¹æ®å½“å‰æ’åºæ–¹å¼é‡æ–°æ’åº
            if (currentSort === 'comments') {
                // æŒ‰è¯„è®ºæ•°æ’åºï¼ˆçƒ­é—¨ï¼‰
                posts.sort((a, b) => (b.comments?.length || 0) - (a.comments?.length || 0));
            } else {
                // æŒ‰åˆ›å»ºæ—¶é—´æ’åºï¼ˆæœ€æ–°ï¼‰
                posts.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            }

            displayPosts(posts);
        }

        // ä¿å­˜å¸–å­åˆ°localStorage
        function savePosts(posts) {
            localStorage.setItem('forumPosts', JSON.stringify(posts));
        }

        // å°è¯•å¤šç§æ–¹æ³•åŠ è½½Issues
        async function tryLoadIssues() {
            // æ–¹æ³•1: å°è¯• GitHub API
            try {
                const response = await fetch(
                    `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/issues?labels=${ISSUES_LABEL}&state=open&sort=updated&direction=desc`,
                    {
                        headers: {
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    }
                );

                if (response.ok) {
                    let issues = await response.json();
                    sortAndDisplayIssues(issues);
                    return;
                }
            } catch (e) {
                console.log('GitHub APIå¤±è´¥ï¼Œå°è¯•å…¶ä»–æ–¹æ³•');
            }

            // æ–¹æ³•2: å°è¯•ç›´æ¥è®¿é—®GitHub Issuesé¡µé¢
            try {
                const response = await fetch(
                    `https://raw.githubusercontent.com/${GITHUB_OWNER}/${GITHUB_REPO}/main/issues.json`
                );

                if (response.ok) {
                    const issuesData = await response.json();
                    sortAndDisplayIssues(issuesData);
                    return;
                }
            } catch (e) {
                console.log('JSONæ–‡ä»¶æ–¹æ³•å¤±è´¥');
            }

            // æ‰€æœ‰æ–¹æ³•éƒ½å¤±è´¥
            throw new Error('æ‰€æœ‰åŠ è½½æ–¹æ³•éƒ½å¤±è´¥');
        }

        // æ’åºå¹¶æ˜¾ç¤ºIssues
        function sortAndDisplayIssues(issues) {
            // æ ¹æ®å½“å‰æ’åºæ–¹å¼é‡æ–°æ’åº
            if (currentSort === 'comments') {
                // æŒ‰è¯„è®ºæ•°æ’åºï¼ˆçƒ­é—¨ï¼‰
                issues.sort((a, b) => (b.comments || 0) - (a.comments || 0));
            } else {
                // æŒ‰æ›´æ–°æ—¶é—´æ’åºï¼ˆæœ€æ–°ï¼‰
                issues.sort((a, b) => new Date(b.updated_at || b.created_at) - new Date(a.updated_at || a.created_at));
            }

            displayIssues(issues);
        }

        // æ˜¾ç¤ºæ‰‹åŠ¨æ“ä½œè¯´æ˜
        function showManualInstructions() {
            const instructionsDiv = document.createElement('div');
            instructionsDiv.style.cssText = 'text-align: center; color: white; padding: 40px; background: rgba(255,255,255,0.1); border-radius: 15px; margin: 20px 0; backdrop-filter: blur(10px);';
            instructionsDiv.innerHTML = `
                <h3 style="margin-bottom: 20px; font-size: 2rem;">è®ºå›è®¿é—®è¯´æ˜</h3>
                <p style="margin-bottom: 20px; font-size: 1.2rem;">ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œéœ€è¦æ‰‹åŠ¨æŸ¥çœ‹è®ºå›å¸–å­</p>

                <div style="display: flex; justify-content: center; gap: 20px; margin-bottom: 30px; flex-wrap: wrap;">
                    <button onclick="window.open('https://github.com/${GITHUB_OWNER}/${GITHUB_REPO}/issues/new?labels=${ISSUES_LABEL}', '_blank')"
                            style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-family: 'Ma Shan Zheng', cursive; transition: all 0.3s ease;"
                            onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 20px rgba(0,0,0,0.3)'"
                            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        ğŸ“ å‘æ–°å¸–
                    </button>

                    <button onclick="window.open('https://github.com/${GITHUB_OWNER}/${GITHUB_REPO}/issues?q=label:${ISSUES_LABEL}', '_blank')"
                            style="background: linear-gradient(135deg, #4facfe 0%, #667eea 100%); color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-family: 'Ma Shan Zheng', cursive; transition: all 0.3s ease;"
                            onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 20px rgba(0,0,0,0.3)'"
                            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        ğŸ“‹ æŸ¥çœ‹æ‰€æœ‰å¸–å­
                    </button>
                </div>

                <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 10px; text-align: left; display: inline-block;">
                    <h4 style="margin-bottom: 15px;">ä½¿ç”¨æ­¥éª¤ï¼š</h4>
                    <ol style="line-height: 1.8;">
                        <li>ç‚¹å‡»"å‘æ–°å¸–"æŒ‰é’®åˆ›å»ºæ–°çš„è®¨è®ºä¸»é¢˜</li>
                        <li>è®°å¾—åœ¨GitHubä¸­æ·»åŠ "è®ºå›"æ ‡ç­¾</li>
                        <li>ç‚¹å‡»"æŸ¥çœ‹æ‰€æœ‰å¸–å­"æµè§ˆç°æœ‰è®¨è®º</li>
                        <li>åœ¨GitHubä¸­å¯ä»¥ç›´æ¥å›å¤å’Œå‚ä¸è®¨è®º</li>
                    </ol>
                </div>
            `;

            // æ¸…ç©ºå¹¶æ˜¾ç¤ºè¯´æ˜
            if (postsList) {
                postsList.innerHTML = '';
                postsList.appendChild(instructionsDiv);
            }
        }

        // æ˜¾ç¤ºç¤ºä¾‹æ•°æ®ï¼ˆå¸¦è¯´æ˜ï¼‰
        function showSampleDataWithInstructions() {
            const instructionsDiv = document.createElement('div');
            instructionsDiv.style.cssText = 'text-align: center; color: white; padding: 40px; background: rgba(255,0,0,0.1); border-radius: 10px; margin: 20px 0;';
            instructionsDiv.innerHTML = `
                <h3>APIè®¿é—®å—é™</h3>
                <p>ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæ— æ³•ç›´æ¥è·å–GitHub Issuesã€‚</p>
                <p>è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p>
                <ol style="text-align: left; display: inline-block;">
                    <li>ç‚¹å‡»"å‘æ–°å¸–"åœ¨GitHubä¸­å‘å¸ƒå¸–å­</li>
                    <li>ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®æ›´æ–°å¸–å­åˆ—è¡¨</li>
                    <li>æˆ–è€…ç›´æ¥è®¿é—® <a href="https://github.com/${GITHUB_OWNER}/${GITHUB_REPO}/issues" target="_blank" style="color: #4facfe;">GitHub Issuesé¡µé¢</a></li>
                </ol>
                <button onclick="window.open('https://github.com/${GITHUB_OWNER}/${GITHUB_REPO}/issues', '_blank')"
                        style="background: #4facfe; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 10px;">
                    è®¿é—®GitHub Issues
                </button>
            `;

            // ç§»é™¤ç°æœ‰å¸–å­
            const existingPosts = forumContainer.querySelectorAll('.post-item');
            existingPosts.forEach(post => post.remove());

            forumContainer.appendChild(instructionsDiv);
        }

        // æ˜¾ç¤ºå¸–å­åˆ—è¡¨
        function displayPosts(posts) {
            // æ¸…ç©ºå¸–å­åˆ—è¡¨
            if (postsList) {
                postsList.innerHTML = '';
            }

            if (posts.length === 0) {
                const emptyMessage = document.createElement('div');
                emptyMessage.style.cssText = 'text-align: center; color: white; padding: 40px;';
                emptyMessage.innerHTML = '<h3>è¿˜æ²¡æœ‰å¸–å­</h3><p>ç‚¹å‡»"å‘æ–°å¸–"å¼€å§‹ç¬¬ä¸€ä¸ªè®¨è®ºå§ï¼</p>';
                postsList.appendChild(emptyMessage);
            } else {
                posts.forEach(post => {
                    const postItem = createPostItem(post);
                    postsList.appendChild(postItem);
                });
            }
        }

        // åˆ›å»ºå¸–å­é¡¹
        function createPostItem(post) {
            const postItem = document.createElement('div');
            postItem.className = 'post-item';

            const createdAt = new Date(post.createdAt).toLocaleString('zh-CN');
            const comments = post.comments || [];
            const author = post.author;

            postItem.innerHTML = `
                <div class="post-title">${post.title}</div>
                <div class="post-meta">
                    <div class="post-author">
                        ${author}
                    </div>
                    <div class="post-stats">
                        ${comments.length}å›å¤ | ${createdAt}
                    </div>
                </div>
                <div class="post-tags">
                    <span class="tag">è®ºå›</span>
                </div>
            `;

            // ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…å’Œå›å¤
            postItem.onclick = () => {
                showPostDetail(post);
            };

            return postItem;
        }

        // æ˜¾ç¤ºå¸–å­è¯¦æƒ…å’Œå›å¤åŠŸèƒ½
        function showPostDetail(post) {
            const detailContent = `
                <div style="color: white; padding: 20px;">
                    <button onclick="loadLocalPosts()" style="margin-bottom: 20px; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 10px 20px; border-radius: 8px; cursor: pointer;">â† è¿”å›åˆ—è¡¨</button>
                    <h3>${post.title}</h3>
                    <p style="margin-bottom: 10px; opacity: 0.8;">ä½œè€…: ${post.author} | ${new Date(post.createdAt).toLocaleString('zh-CN')}</p>
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                        ${post.content.replace(/\n/g, '<br>')}
                    </div>
                    <div id="comments-section">
                        <h4>å›å¤ (${post.comments.length})</h4>
                        <div id="comments-list">
                            ${post.comments.map(comment => `
                                <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                                    <div style="font-weight: bold; margin-bottom: 5px;">${comment.author}</div>
                                    <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 10px;">${new Date(comment.createdAt).toLocaleString('zh-CN')}</div>
                                    <div>${comment.content.replace(/\n/g, '<br>')}</div>
                                </div>
                            `).join('')}
                        </div>
                        <div style="margin-top: 20px;">
                            <textarea id="new-comment" placeholder="å†™ä¸‹ä½ çš„å›å¤..." style="width: 100%; min-height: 100px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 10px; border-radius: 8px; resize: vertical;"></textarea>
                            <button onclick="addComment('${post.id}')" style="margin-top: 10px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; padding: 10px 20px; border-radius: 8px; cursor: pointer;">å‘è¡¨å›å¤</button>
                        </div>
                    </div>
                </div>
            `;

            if (postsList) {
                postsList.innerHTML = detailContent;
            }
        }

        // æ·»åŠ å›å¤åŠŸèƒ½
        function addComment(postId) {
            const textarea = document.getElementById('new-comment');
            const content = textarea.value.trim();

            if (!content) {
                alert('è¯·è¾“å…¥å›å¤å†…å®¹ï¼');
                return;
            }

            const posts = JSON.parse(localStorage.getItem('forumPosts') || '[]');
            const postIndex = posts.findIndex(p => p.id == postId);

            if (postIndex !== -1) {
                const newComment = {
                    id: Date.now(),
                    content: content,
                    author: 'åŒ¿åç”¨æˆ·',
                    createdAt: new Date().toISOString()
                };

                posts[postIndex].comments.push(newComment);
                savePosts(posts);

                alert('å›å¤æˆåŠŸï¼');
                showPostDetail(posts[postIndex]); // åˆ·æ–°è¯¦æƒ…é¡µ
            }
        }

        // æ˜¾ç¤ºç¤ºä¾‹æ•°æ®ï¼ˆå½“APIå¤±è´¥æ—¶ï¼‰
        function showSampleData() {
            const sampleIssues = [
                {
                    title: 'APIè¿æ¥å¤±è´¥ - æ˜¾ç¤ºç¤ºä¾‹å¸–å­',
                    html_url: 'https://github.com/Aliceykr/Web/issues',
                    user: { login: 'ç³»ç»Ÿæ¶ˆæ¯' },
                    comments: 0,
                    created_at: new Date().toISOString(),
                    updated_at: new Date().toISOString(),
                    number: 1,
                    labels: []
                }
            ];
            displayIssues(sampleIssues);
        }

        // å‘æ–°å¸–åŠŸèƒ½
        function createNewIssue() {
            const issueUrl = `https://github.com/${GITHUB_OWNER}/${GITHUB_REPO}/issues/new?labels=${ISSUES_LABEL}&title=è¯·è¾“å…¥æ ‡é¢˜&body=è¯·åœ¨æ­¤è¾“å…¥å¸–å­å†…å®¹`;
            window.open(issueUrl, '_blank');
        }

        // æŸ¥çœ‹æ‰€æœ‰å¸–å­åŠŸèƒ½
        function viewAllPosts() {
            const issuesUrl = `https://github.com/${GITHUB_OWNER}/${GITHUB_REPO}/issues?q=label:${ISSUES_LABEL}`;
            window.open(issuesUrl, '_blank');
        }

        // åˆ›å»ºæ–°å¸–å­
        function createNewPost() {
            const title = prompt('è¯·è¾“å…¥å¸–å­æ ‡é¢˜ï¼š');
            if (!title) return;

            const content = prompt('è¯·è¾“å…¥å¸–å­å†…å®¹ï¼š');
            if (!content) return;

            const posts = JSON.parse(localStorage.getItem('forumPosts') || '[]');
            const newPost = {
                id: Date.now(),
                title: title,
                content: content,
                author: 'åŒ¿åç”¨æˆ·',
                createdAt: new Date().toISOString(),
                comments: []
            };

            posts.unshift(newPost); // æ·»åŠ åˆ°å¼€å¤´
            savePosts(posts);
            loadLocalPosts(); // é‡æ–°æ˜¾ç¤º

            alert('å‘å¸–æˆåŠŸï¼');
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ç»‘å®šæ‰€æœ‰æŒ‰é’®
            const newPostBtn = document.getElementById('new-post-btn');
            const hotBtn = document.getElementById('hot-btn');
            const latestBtn = document.getElementById('latest-btn');

            if (newPostBtn) {
                newPostBtn.onclick = createNewPost;
            }

            if (hotBtn) {
                hotBtn.onclick = () => {
                    currentSort = 'comments'; // æŒ‰è¯„è®ºæ•°æ’åº
                    loadLocalPosts();
                };
            }

            if (latestBtn) {
                latestBtn.onclick = () => {
                    currentSort = 'updated'; // æŒ‰æ—¶é—´æ’åº
                    loadLocalPosts();
                };
            }

            // åŠ è½½å¸–å­
            loadIssues();
        });
    </script>
</body>
</html>